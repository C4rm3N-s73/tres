<html>
  <head>
    <meta charset="UTF-8">
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- icono del la pestaña -->
    <link rel="shortcut icon" href="./biblioteca/imagenes/favicon.png">
    <title>3</title>
<!--modelos-->
<a-asset-item id="luna" src="./biblioteca/modelos/luna.glb"></a-asset-item>
<a-asset-item id="mb" src="./biblioteca/modelos/pasto.glb"></a-asset-item>
<a-asset-item id="bomba" src="./biblioteca/modelos/mariposas.glb"></a-asset-item>
<a-asset-item id="calabaza" src="./biblioteca/modelos/calabaza.glb"></a-asset-item>
<a-asset-item id="lunita" src="./biblioteca/modelos/lunita.glb"></a-asset-item>
<a-asset-item id="fresa" src="./biblioteca/modelos/fresa.glb"></a-asset-item>
<a-asset-item id="chica" src="./biblioteca/modelos/chica.glb"></a-asset-item>
<a-asset-item id="mariposa" src="./biblioteca/modelos/butter.glb"></a-asset-item>
<a-asset-item id="loto" src="./biblioteca/modelos/flor_loto.glb"></a-asset-item>
<a-asset-item id="arbol" src="./biblioteca/modelos/arbol1.glb"></a-asset-item>
<a-asset-item id="amarillo" src="./biblioteca/modelos/flowers.glb"></a-asset-item>
<img id="titulo" src="./Bibliotecas/imagenes/nombre.png">
<img id="madera" src="./biblioteca/imagenes/mosaico.jpg">
<img id="m" src="./biblioteca/imagenes/roug.jpg">
<a-sound id="noche" src="./biblioteca/sonidos/noche.wav"></a-sound>


<!-- enviroments-->
 <!-- link de la libreria para leer las etiquetas de aframe -->
 <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>

<!-- script para gifs -->
<script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
<script src="https://rawgit.com/mayognaise/aframe-gif-component/master/dist/aframe-gif-component.min.js"></script>
<!-- para leer animación -->
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
<!-- script para texturas -->
<script src="https://cdn.jsdelivr.net/npm/aframe-enviropacks@latest/aframe-enviropacks.js"></script>
<script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>
<!-- scripts para colisiones y físicas -->
    <script
        src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script> src = "https://unpkg.com/aframe-physics-extras@0.1.2/dist/aframe-physics-extras.min.js" </script>
    <!-- scripts movimiento de la cámara -->
    <script> src = "https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js" </script>
    <script> src = "https://unpkg.com/super-hands@2.0.2/dist/super-hands.min.js" </script>
    <!-- partículas-->
    <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
    <script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
    <script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
    <script src="https://unpkg.com/aframe-gradient-sky@1.2.0/dist/gradientsky.min.js"></script>
    <!-- scripts para enviroments-->
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
 <!-- scipts para animacion de agua -->
 <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
 <script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
 <script src="https://unpkg.com/aframe-animation-component@3.2.1/dist/aframe-animation-component.min.js"></script>
    <!-- scripts para truco de transparencia en modelos 3d-->
    <script>
      AFRAME.registerComponent('model-opacity', {
          schema: { default: 1.0 },
          init: function () {
              // this.el.addEventListener('model-loaded', this.update.bind(this));
              this.el.addEventListener("model-loaded", () => {
                  const object3DEl = this.el.object3DMap;
                  ;








                  var mesh = this.el.getObject3D('mesh'); // For hand, the result is undefined
                  // var mesh = this.el.object3DMap.mesh; // For hand, the result is undefined
                  console.log(mesh);
                  var data = this.data;
                  if (!mesh) { return; }
                  mesh.traverse(function (node) {
                      if (node.isMesh) {
                          ;
                          node.material.opacity = data;
                          node.material.transparent = data < 1.0;
                          node.material.needsUpdate = true;
                      }
                  });
              }, 2000)
















          },
          update: function () {
              var mesh = this.el.getObject3D('mesh');
              var data = this.data;
              if (!mesh) { return; }
              mesh.traverse(function (node) {
                  if (node.isMesh) {
                      ;
                      node.material.opacity = data;
                      node.material.transparent = data < 1.0;
                      node.material.needsUpdate = true;
                  }
              });
          }
      });
  </script>
  </head>
  <body>
    

    <a-scene loading-screen="dotsColor:pink; backgroundColor:white" physics="gravity:-25; debug: false"
        vr-mode-ui="enabled:false">

      <!-- Cielo -->
<a-sphere color="#82bbc9" radius="120" material="src: ./Biblioteca/Imagenes/cielo.jpg; side: double;"
animation="property:rotation; to: 0 360 0; loop:true; dur:201900"></a-sphere>
<a-sphere color="#fff" radius="110" transparent="true" material="src: ./Biblioteca/Imagenes/estrellas.png; side: double;"
animation="property:rotation; to: 0 360 0; loop:true; dur:250500"></a-sphere>
<!-- Camara -->
<camera position="2 1 1"><a-cursor></a-cursor></camera>

<a-entity environment="groundColor: #008200; grid: cross; dressing: mushrooms; dressingAmount: 150; dressingColor: #fff; skyType: atmosphere; skyColor: #ffffff; horizonColor: #ffffff; lighting: point; ground: hills; groundTexture: walkernoise; groundColor2: #004a00; dressingScale: 0.64; fog: 0;"
        visible=""></a-entity>
<a-entity light="type: ambient; color: #fff6c2; intensity: 0.5"></a-entity>

<!-- Piso invisible -->
<a-plane static-body color="#058a05" position="0.445 0.030 -1.879" rotation="-90 0 0" scale="200 200"
opacity="1"></a-plane>

<!-- Modelos -->

<a-entity gltf-model="#lunita" position="-14 20 -77.5" scale="2 2 2" rotation="30 0 0"  animation="property:rotation; to: 0 360 0; loop:true; dur:200000; easing: linear"></a-entity>
<a-entity light="type: ambient; color: ##7e7020; intensity: 0.2" position="-14 38 -32.5"
animation= "property: light.intensity; to: .5; dur:1000; loop: true"></a-entity>
<a-entity gltf-model="#calabaza" position="-1 0 2" scale="7 7 7" rotation="0 20 0"></a-entity>
<a-entity gltf-model="#fresa" position="25 2 -42" scale=".01 .01 .01" rotation="0 -12 60" animation="property: scale; to: .05 .05 .05; dur:3500;"></a-entity>
<a-entity gltf-model="#loto" position="-15.826 2 12.724" scale=".75 .75 .75" rotation="0 0 0"></a-entity>
<a-entity gltf-model="mariposa" animation-mixer position="1 1 1"></a-entity>
<a-entity gltf-model="#arbol" position="-18.5 3 4.3" scale=".27 .27 .27" rotation="0 0 0">
    <a-sound src="src: url(./biblioteca/sonidos/noche.waw)" autoplay="true" loop="true" volume="4"
    position="0 0 0"></a-sound>
</a-entity>
<a-image src="biblioteca/imagenes/nombre.png" scale="1.5 1.5 1.5" position="-1.04 2 1.06" rotation="0 25 0"></a-image>
<a-entity gltf="#chica" animation-mixer position="1 3 1" scale="1 1 1"></a-entity>
<a-entity gltf-model="#amarillo" animation-mixer position="21 1 4" rotation="0 -90 0" scale=".4 .4 .4"></a-entity>
<a-entity gltf-model="#amarillo" animation-mixer position="21 1 8.5" rotation="0 -90 0" scale=".37 .37 .37"></a-entity>
<a-entity gltf-model="#amarillo" animation-mixer position="21 1 12" rotation="0 -90 0" scale=".35 .35 .35"></a-entity>
<a-entity gltf-model="#bomba" position="10 .6 10" rotation="0 -90 0" scale=".7 .7 .7"></a-entity>
<a-entity gltf-model="#mb" position="5 .15 8" rotation="0 -90 0" scale=".02 .02 .02"></a-entity>
<a-entity light="type: directional; color: #fff6c2; intensity: 0.5 " position="5 .350 8"></a-entity>

<!-- Texto -->
<a-entity
text-geometry="value: Dream; size: 5; height: 3; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 5.020"
material="shader: standard; color:#c974cd" rotation="0 0 0" position="8.092 1.117 -6.635"
scale="0.190 0.190 0.190"></a-entity>

<!-- figuras -->
<a-torus color="#e71861" position="-11 1.5 -11" rotation="0 240 0" metallic=".5" scale="3 3 3"></a-torus>
<a-plane position="-15 1 10" color="#7d0986" scale="6 3 6" rotation="0 0 0" opacity=".5"></a-plane>
<a-plane position="-15 1 15.908" color="#7d0986" scale="6 3 6" rotation="0 0 0" opacity=".5"></a-plane>
<a-plane position="-18 1 12.943" color="#7d0986" scale="6 3 6" rotation="0 90 0" opacity=".5"></a-plane>
<a-plane position="-12 1 12.943" color="#7d0986" scale="6 3 6" rotation="0 90 0" opacity=".5"></a-plane>
<a-sphere geometry="primitive: dodecahedron;" position="-10 0.600 -5" color="#af0e0e" opacity=".80" scale=".7 .7 .7"   
animation__mouseenter="property: components.material.material.color; type: color; to: #0920ce; startEvents: mouseenter; dur: 1000";   
animation__mouseleave="property: components.material.material.color; type: color; to: #af0e0e; startEvents: mouseleave; dur: 500";>>
</a-sphere>
<a-torus-knot  color="#c87f19" position="-3 3 -25" scale="1.5 1.5 1.5" wireframe="5" animation="property:rotation; to: 0 90 360; dur:10000; easing: linear; loop: true; dir: alternate; property:scale; to: .02 .02.02; dur:30000; loop: true;"></a-torus-knot>
<a-torus-knot  color="#7d0986" position="7.100 1.500 -6" scale=".4 .4 .4" wireframe="3" animation="property:rotation; to: 0 360 90; loop:true; dur:5000; easing: linear"></a-torus-knot>
<a-torus-knot  color="#b529bc" position="13 1.500 -6" scale=".4 .4 .4" wireframe="7" rotation="0 45 0" animation="property:rotation; to: 0 360 0; loop:true; dur:5000; easing: linear"></a-torus-knot>
<a-torus-knot  color="#757575" position="-11.8 .600 -4" scale=".2 .2 .2" wireframe="3" 
animation__mouseenter="property: material.opacity; 
type: opacity; to: .15; startEvents: mouseenter; dur: 500";
animation__mouseleave="property: material.opacity; 
type: opacity; to: 1; startEvents: mouseleave; dur: 500";></a-torus-knot>
<a-sphere material="src:#m" scale=".7 .7 .7" position="16 1.5 16" a-animation attribute="rotation" from="0 360 0" to="0 360 0" repeat="forever" dur="10000" easing="linear">
</a-sphere>




<!-- agua -->
<a-entity ocean="density:10; speed:1" position=" -15.239 .985 12.777" scale=".6 .6 3"
material="color:#4863ea; opacity: 0.8; metalness: 0; roughness: 1" rotation=" -90 0 0"></a-entity>

<!-- escaleras -->
<a-box color="#7d0986" opacity=".7" static-body position="-7.5 0 12" scale="4 .5 1" rotation="0 90 0"></a-box>
<a-box color="#7d0986" opacity=".7" static-body position="-8.5 .5 12" scale="4 .5 1" rotation="0 90 0"></a-box>
<a-box color="#7d0986" opacity=".7" static-body position="-9.5 1 12" scale="4 .5 1" rotation="0 90 0"></a-box>
<a-box color="#7d0986" opacity=".7" static-body position="-10.5 1.5 12" scale="4 .5 1" rotation="0 90 0"></a-box>
<a-box color="#7d0986" opacity=".7" static-body position="-11.5 2 12" scale="4 .5 1" rotation="0 90 0"></a-box>
</a-scene>
</body>
</html>